<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Debian GNU/Linux - Administration Unix - Gnuside</title>

		<meta name="description" content="Gnuside - Admin Debian GNU/Linux">
		<meta name="author" content="Gnuside">

		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/zenburn.css">

		<!-- gnuside css -->
		<link rel="stylesheet" href="css/presentation.css">

	</head>

	<body>

		<div id="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-state="title">
					<h1>Debian GNU/Linux</h1>
					<h3 class="inverted">Bases d'administration unix</h3>
					<script>
						// Delicously hacky. Look away.
if( navigator.userAgent.match( /(iPhone|iPad|iPod|Android)/i ) )
	document.write( '<p style="color: rgba(0,0,0,0.3); text-shadow: none;">('+'Tap to navigate'+')<'+'/p>' );
					</script>

					<br/>
					<p>2012-05</p>
					<br/>
					<p>
						<i><small>
								<a href="http://www.glenux.net">Glenn Y. Rolland</a> / 
								<a href="http://twitter.com/glenux">@glenux</a>
						</small></i>
					</p>
				</section>	

				<section>
					<section>
						<h2>Utilisateurs et groupes</h2>
						<p>Quelques fichiers importants</p>
						<ul>
							<li class="fragment"><a href="#2/3">/etc/passwd</a> - utilisateurs</li>
							<li class="fragment"><a href="#2/4">/etc/shadow</a> - mots de passe</li>
							<li class="fragment"><a href="#2/4">/etc/groups</a> - groupes</li>
						</ul>
					</section>

					<section>
						<h2>/etc/passwd</h2>
						<div class="fragment">
							<p>Un format super-simple</p>
							<p><small>
									<b>username</b> :
									<b>password</b> : 
									<b>user id (UID)</b> : 
									<b>group id (GID)</b> : 
									<b>description</b> : 
									<b>home</b> : 
									<b>shell</b>
								</small>
							</p>
						</div>
						<div class="fragment">
							<p>Exemple (réel)</p>
							<pre>
			<code>
root:x:0:0:root:/root:/bin/bash 
daemon:x:1:1:daemon:/usr/sbin:/bin/sh 
bin:x:2:2:bin:/bin:/bin/sh 
sys:x:3:3:sys:/dev:/bin/sh 
sync:x:4:65534:sync:/bin:/bin/sync 
games:x:5:60:games:/usr/games:/bin/sh 
man:x:6:12:man:/var/cache/man:/bin/sh 
lp:x:7:7:lp:/var/spool/lpd:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh 

...

batman:x:1001:1001:Bruce Wayne:/home/batman:/bin/bash
			</code>
			</pre>
						</div>
					</section>

					<section>
						<h2>/etc/shadow</h2>
						<div class="fragment">
							<p>Un format super-simple :</p>
							<p><small>
									<b>username</b> :
									<b>password</b> : 
									<b>date du password</b> : 
									<b>etc (age min, age max...)</b>
								</small>
							</p>
						</div>
						<div class="fragment">
							<p>Exemple (réel) :</p>
<pre><code>
root:$6$gjBGnh.Q$RPnyfdvkhXHTP4xtcrVO4I7lGIyp8G3IZiQjjj8cBDikCE3ePuPBuzAex1ip1KVLFbe5GYKiGNxAybPU783Bk0:15174:0:99999:7:::
daemon:*:15172:0:99999:7:::
bin:*:15172:0:99999:7:::
sys:*:15172:0:99999:7:::
sync:*:15172:0:99999:7:::
games:*:15172:0:99999:7:::
man:*:15172:0:99999:7:::
lp:*:15172:0:99999:7:::
mail:*:15172:0:99999:7:::
news:*:15172:0:99999:7:::

...

batman:$6$MdCbGr5F$PfyMqt8MC2EQjzczwdLuqwTxAbm/BqfErwU7gvd02vGQbxL.ZIg5tSNacfp/4pmfwodDYioXTSon2VxTZnQYW/:15174:0:99999:7:::
</code></pre>
						</div>
					</section>


					<section>
						<h2>/etc/group</h2>
						<div class="fragment">
							<p>Un format super-simple :</p>
							<p><small>
									<b>group name</b> :
									<b>password</b> : 
									<b>group id (GID)</b> : 
									<b>group list</b>
								</small>
							</p>
							<div class="fragment">
								<p>Exemple (réel) :</p>
<pre><code>
root:x:0:
daemon:x:1:

...

lp:x:7:
mail:x:8:
news:x:9:
cdrom:x:24:batman
floppy:x:25:batman
audio:x:29:batman,pulse

...

batman:x:1002:
robin:x:1003:
batteam:x:1004:batman,robin,batgirl
</code></pre>
							</div>
						</section>



						<section>
							<h2>UIDs et GIDs</h2>
							<div class="fragment">
								<p>Valeurs de 0 à 65534</p>
								<ul>
									<li class="fragment"><b>0</b> : root (administrateur)</li>
									<li class="fragment"><b>1-99</b> :
										Utilisateurs système, alloués par le projet Debian
									</li>
									<li class="fragment"><b>100-999</b> :
										Utilisateurs système, non-alloués par le projet Debian</li>
									<li class="fragment"><b>1000-59999</b> : Utilisateurs “normaux”</li>
									<li class="fragment"><b>60000-64999</b> : Utilisateurs “normaux” gérés par Debian</li>
									<li class="fragment"><b>65000-65533</b> : Réservé</li>
									<li class="fragment"><b>65534</b> : Utilisateur "nobody" (sans droits ni permissions)
									</li>
								</ul>
							</section>
						</section>



						<section>
							<section>
								<h2>Utilisateurs : ajout et suppression</h2>
								<div class="fragment">
									<p>Pour ajouter</p>
									<ul>
										<li><b>useradd</b> (minimaliste et standart)</li>
										<li><b>adduser</b> (polyvalent mais spécifique Debian)</li>
									</ul>
					<pre><code>root@batcave:~# useradd batman</code></pre>
								</div>
								<div class="fragment">
									<p>Pour supprimer</p>
									<ul>
										<li><b>userdel</b> (minimaliste et standart)</li>
										<li><b>deluser</b> (polyvalent mais spécifique Debian)</li>
									</ul>
						<pre><code>root@batcave:~# userdel batman</code></pre>
								</div>
							</section>



							<section>
								<h2>Utilisateurs : modification</h2>
								<div class="fragment">
									<p>Changer le mot de passe : <b>passwd</b></p>
									<pre><code>batman@batcave:~$ passwd
Changement du mot de passe pour batman.
Mot de passe UNIX (actuel) : 
Entrez le nouveau mot de passe UNIX : 
Retapez le nouveau mot de passe UNIX : 
passwd : le mot de passe a été mis à jour avec succès
batman@batcave:~#
</code></pre>
								</div>
								<div class="fragment">
									<p>Modifier les propriétés : <b>usermod</b></p>
			<pre><code># usermod batman -c "Bat-Like Avenger"</code></pre>
								</div>
							</section>



							<section>
								<h2>Groupes : ajout et suppression</h2>
								<div class="fragment">
									<p>Pour ajouter</p>
									<ul>
										<li><b>groupadd</b> (minimaliste et standart)</li>
										<li><b>addgroup</b> (polyvalent mais spécifique Debian)</li>
									</ul>
									<pre><code>root@batcave:~# groupadd batteam
</code></pre>
								</div>
								<div class="fragment">
									<p>Pour supprimer</p>
									<ul>
										<li><b>groupdel</b> (minimaliste et standart)</li>
										<li><b>delgroup</b> (polyvalent mais spécifique Debian)</li>
									</ul>
									<pre><code>root@batcave:~# groupdel batteam
</code></pre>
								</div>
							</section>


							<section>
								<h2>Groupes : quelques outils</h2>
								<ul>
									<li class="fragment"><b>id</b> - afficher les identifiants d'utilisateur et de groupe</li>
									<li class="fragment"><b>groups</b> -  affiche les groupes auxquels appartient un utilisateur</li>
									<li class="fragment"><b>getent</b> - récupère des entrées depuis les bases de données d'administration</li>
								</ul>
							</section>

							<section>
								<h2>Configuration des comptes utilisateurs</h2>
								<ul>
									<li><b>/etc/skel.conf</b></li>
									<li><b>/etc/skel/*</b></li>
									<li><b>/etc/adduser.conf</b></li>
									<li><b>/etc/default/adduser</b></li>
								</ul>
							</section>
						</section>



						<section>
							<h2>Installation de logiciels</h2>
							<p>L'installation peut varier
								<span class="fragment"><b>selon le logiciel</b></span><br/>
								<span class="fragment">et <b>selon la distribution</b> !</span>
							</p>
							<br />
							<p class="fragment">En général, à partir du <i>code source</i> :</p>
							<ul>
								<li class="fragment"><b>./configure</b> (detecte l'environnement et configure)</li>
								<li class="fragment"><b>make</b> (compile les sources en un binaire exécutable)</li>
								<li class="fragment"><b>make install</b> (installe sur le système)</li>
							</ul>
							<br />
							<br />
							<p class="fragment">Démonstration !</p>
						</section>



						<section>
							<section>
								<h2>Archivage</h2>
								<ul>
									<li class="fragment"><b>tar</b> - archivage de fichiers</li>
									<li class="fragment"><b>cpio</b> - archivage de fichiers</li>
									<li class="fragment"><b>rsync</b> - archivage de fichiers</li>
									<li class="fragment"><b>dd</b> - copie de disques</li>
									<li class="fragment"><b>partimage</b> copies de disques</li>
								</ul>
							</section>

							<section>
								<h2>Archivage : <b>tar</b></h2>
									<ul>
										<li class="fragment">sans compression</li>
										<li class="fragment">outils tiers pour compresser: <b>gzip</b>, <b>bzip2</b>, <b>7z</b>...</p>
										<li class="fragment">dans tar, paramètres : <b>-z</b> (gzip),<b>-j</b> (bzip2), <b>-a</b> (automatique)</p>
									</ul>

									<div class="fragment">
										<p><small>Exemple: créer une archive au format <b>tar.gz</b></small></p>
<pre><code>
tar czvf archives-batcave.tar.bz2 /home/batman/documents
</code></pre>
<pre><code>
tar cvf archives-batcave.tar /home/batman/documents
gzip archives-batcave.tar
</code></pre>
									</div>

									<div class="fragment">
										<small>Exemple: ouvrir une archive <b>tar.gz</b></small>
<pre><code>
gunzip archives-batcave.tar.gz
tar xvf archives-batcave.tar
</code></pre>

<pre><code>
tar xavf archives-batcave.tar.gz
</code></pre>
								</div>

<div class="fragment">
	<p>Peut aussi servir à copier des disques</p>
<pre><code>
(cd /anciendisque ; tar cf - . ) | (cd /nouveaudisque ; tar xvf - )
</code></pre>
</div>
<!-- FIXME: cpio -->
									</section>


									<section>
										<h2>Sauvegarde : <b>dd</b></h2>
<pre><code>
dd if=/foo of=/bar bs=1M count=1000
</code></pre>
										<p>Ne résiste pas aux erreurs disque</p>
										<p>Une alternative : <b>dd_rescue</b></p>
									</section>

									<section>
										<h2>Sauvegarde : <b>dd</b></h2>
										rsync
										partimage
									</section>
								</section>

						<section>
							<h2>Références</h2>
							<ul>
								<li><a href="http://www.debian.org/doc/debian-policy/ch-opersys.html">Debian policy Manual</a></li>
							</ul>
						</section>



						<section>
							<h2>Merci !</h2>
							<p class="fragment">Des questions ?</p>
						</section>

					</div> <!-- .slides -->

					<!-- The navigational controls UI -->
					<aside class="controls">
						<a class="left" href="#">&#x25C4;</a>
						<a class="right" href="#">&#x25BA;</a>
						<a class="up" href="#">&#x25B2;</a>
						<a class="down" href="#">&#x25BC;</a>
					</aside>

					<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
					<div class="progress"><span></span></div>
				</div> <!-- #reveal -->

				<script src="js/reveal.js"></script>
				<script src="lib/highlight.js"></script>
				<script>
					// Parse the query string into a key/value object
				var query = {};
location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
		query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
		} );

Reveal.initialize({
		// Display controls in the bottom right corner
controls: true,

// Display a presentation progress bar
progress: true,

// If true; each slide will be pushed to the browser history
history: true,

// Flags if mouse wheel navigation should be enabled
mouseWheel: true,

// Apply a 3D roll to links on hover
rollingLinks: false,
//true,

// UI style
theme: query.theme || 'default', // default/neon

// Transition style
transition: query.transition || 'linear'  //default' // default/cube/page/concave/linear(2d)
});

hljs.initHighlightingOnLoad();
	</script>

	</body>
</html>
