<html>
	<head>

		<script src="jquery-1.7.2.min.js">	
		</script>
		<script>

		function updateList( scores ) {
			$("#highscores").empty();
			for(var playername in scores) {
				console.log("nom " + playername);
				$("#highscores").append("<li>" + playername +
						" : " + scores[playername] +
						"</li>");
			}
		}
		$(document).ready( function() {
				// test if localStorage exists
				var scores = {};

				if (localStorage['demo.scores']) {
					console.log("demo.score : trouv√© !");
					scores = JSON.parse( localStorage['demo.scores'] );
				} else {
					console.log("demo.score : initialisation");
					localStorage['demo.scores'] = JSON.stringify(scores);
				}

				$("form input[type='submit']").click(function(ev) {
					ev.preventDefault();
					var playerscore = Math.random();	
					var playername = $("#playername").val();
					scores[playername] = playerscore;
					console.log(scores);
					// FIXME: we must save the data somewhere
					localStorage['demo.scores'] = JSON.stringify(scores);
					updateList(scores);
				});
		});
		</script>
	</head>
	<body>
		<h1>Highscores</h1>

		<form>
			Player name : 
			<input type="text" id="playername" placeholder="Player Name"/>
			<input type="submit" />
			<!-- FIXME: replace with a keypress event handler
			-->
		</form>

		<ul id="highscores">
		</ul>
	</body>
</html>
